<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Todo App</title>
  <style>
    /* ===== Global Reset ===== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: linear-gradient(135deg, #74ebd5, #acb6e5);
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      color: #333;
      min-height: 100vh;
    }

    /* ===== Navbar ===== */
    .navi {
      background: #2c3e50;
      height: 60px;
      display: flex;
      justify-content: flex-end;
      align-items: center;
      padding: 0 25px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .tom{
      display: flex;
      justify-content: space-between;
      width: 100%;
    }
      
    .navi button {
      background: #e74c3c;
      border: none;
      padding: 10px 18px;
      border-radius: 8px;
      color: white;
      font-weight: 600;
      cursor: pointer;
      transition: 0.3s;
    }

    .navi button:hover {
      background: #c0392b;
      transform: scale(1.05);
    }

    /* ===== Main Container ===== */
    .container {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: 30px;
      padding: 40px;
      flex-wrap: wrap;
    }

    /* ===== To-Do List Section ===== */
    .tada {
      flex: 1;
      min-width: 500px;
      background: white;
      border-radius: 12px;
      padding: 25px;
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
    }

    /* ===== Add Todo Box ===== */
    .boxes {
      width: 300px;
      /* background: white; */
      border-radius: 12px;
      /* padding: 25px; */
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
    }

    /* Hide by default */
    .hidden {
      display: none;
    }

    /* Add Button Styling */
    .add-toggle {
      background: #2ecc71;
      color: white;
      border: none;
      padding: 10px 16px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      font-size: 14px;
      transition: 0.3s;
      width: 100%;
    }

    .add-toggle:hover {
      background: #27ae60;
    }

    label {
      font-size: 1em;
      font-weight: 600;
      margin-bottom: 8px;
      display: block;
      color: #2c3e50;
    }

    input[type="text"] {
      width: 100%;
      padding: 12px 14px;
      border-radius: 8px;
      border: 1px solid #ddd;
      margin-bottom: 12px;
      font-size: 14px;
      outline: none;
      transition: 0.3s;
    }

    input[type="text"]:focus {
      border-color: #74ebd5;
      box-shadow: 0 0 6px rgba(116, 235, 213, 0.5);
    }

    /* ===== General Buttons ===== */
    button {
      background: #3498db;
      color: white;
      border: none;
      padding: 10px 16px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      transition: 0.3s;
    }

    button:hover {
      background: #2980b9;
      transform: scale(1.05);
    }

    /* ===== Todo Item Styling ===== */
    .todo-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #f7f9fc;
      border: 1px solid #e0e6ed;
      padding: 12px 15px;
      margin-bottom: 12px;
      border-radius: 10px;
      box-shadow: 0 3px 6px rgba(0, 0, 0, 0.05);
      transition: 0.3s;
    }

    .todo-item:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
    }

    .team {
      flex-grow: 1;
      font-size: 15px;
      color: #2c3e50;
      font-weight: 500;
    }

    /* Complete Button */
    .todo-item button {
      background: #2ecc71;
      padding: 8px 14px;
      border-radius: 6px;
      font-size: 13px;
    }

    .todo-item button:hover {
      background: #27ae60;
    }

    /* Delete Button */
    .trim {
      background: #e74c3c !important;
      padding: 8px 12px !important;
      margin-left: 8px;
      border-radius: 6px !important;
    }

    .trim:hover {
      background: #c0392b !important;
    }
    .but{
        width: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        padding: 0px;
    }
  </style>
</head>
<body>
  <div class="navi">
    <nav><button onclick="logout()">Logout</button></nav>
  </div>

  <div class="container">
    <div class="tada"></div>

    <div class="boxes">
      <!-- Initially only Add button -->
     <div class="but"><button class="add-toggle" onclick="toggleAddBox()">âž• Add</button></div>
      

      <!-- Hidden Add Box -->
      <div id="addBox" class="hidden">
        <form action="todo">
          <label for="ADDTODO">Add Todo:</label>
          <input type="text" id="ADDTODO" placeholder="Enter a todo">
        </form>
        <button onclick="addtodo()">Submit</button>
      </div>
    </div>
  </div>

  <script>
    async function addtodo(){
      let todo = document.getElementById('ADDTODO').value;
       let addtodo =  await fetch('https://striking-purpose-production.up.railway.app/adtodo',{
        method: 'POST',
            headers:{
                
          'Content-Type': 'application/json',
         token: localStorage.getItem("token")  
              },

            body: JSON.stringify({
                todo:todo
                
            })
       })
      let newdev = document.createElement('div');
      newdev.innerHTML += `<div class="tom"><div class="team">${todo}</div>
        <div><button onclick="complete(this)">Complete</button></div>
        </div>
        <div><button class="trim" onclick="deletei(this)"><img src="../delete.svg" alt="delete"></button></div>`;
      newdev.className = "todo-item";
      document.getElementsByClassName('tada')[0].appendChild(newdev);
    }

    function logout(){
      localStorage.removeItem("token");
      window.location.href = "index.html";
    }

    function complete(element){
      element.innerHTML = "Completed";
      element.style.backgroundColor = 'red';
      element.style.padding = "9px";
      element.style.borderRadius = "7px";
    }

    async function getinformation(){
      let response = await fetch('https://striking-purpose-production.up.railway.app/me',{
        method: 'GET',
        headers: {
          token: localStorage.getItem("token")
        }
      });
      const data = await response.json();
      for(let i=0;i<data.todos.length;i++){
        let newdev = document.createElement('div');
        newdev.innerHTML += `<div class="tom"><div class="team">${data.todos[i].titles}</div>
          <div><button onclick="complete(this)">Complete</button></div>
          </div>
          <div><button class="trim" onclick="deletei(this)"><img src="../delete.svg" alt="delete"></button></div>`;
        newdev.className = "todo-item";
        document.getElementsByClassName('tada')[0].appendChild(newdev);
      }
    }

    async function deletei(element){
      let todo = element.closest('.todo-item').querySelector('.team').innerText;
      let response = await fetch('https://striking-purpose-production.up.railway.app/delete',{
        method: 'DELETE',
        headers: {
          token: localStorage.getItem("token"),
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ todo: todo })
      });
      element.closest('.todo-item').remove();
    }

    function toggleAddBox() {
      let box = document.getElementById("addBox");
      box.classList.toggle("hidden");
    }

    getinformation();
  </script>
</body>
</html>




